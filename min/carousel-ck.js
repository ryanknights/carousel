!function(t,i,$){function s(){var t=i.body||i.documentElement,s=t.style,e="transition";if("string"==typeof s[e])return this.animationPrefix=e,!0;var o=["Moz","webkit","Webkit","Khtml","O","ms"];e=e.charAt(0).toUpperCase()+e.substr(1);for(var n=0;n<o.length;n++)if("string"==typeof s[o[n]+e])return this.animationPrefix=o[n],!0;return!1}function e(t,i){this.el=t,this.$el=$(t),this.options=$.extend({},this.defaultOptions,i,this.$el.data()),this.wrap=this.$el.find("> ul"),this.preLoadCounter=0,this.slides=this.wrap.find("> li"),this.width=this.$el.width(),this.inProgress=!1,this.supportTransition=s.call(this),this.interval=null,this._init()}function o(t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var s=$(this),o=s.data("carousel");o||s.data("carousel",o=new e(this,t)),"string"==typeof t&&o[t]&&"_"!==t[0]&&o[t].apply(o,i)})}e.prototype.Version=1,e.prototype.defaultOptions={animation:"slide",controls:!1,pagination:!0,keyControls:!0,captions:!1,responsive:!0,infinite:!0,startSlide:null,useCss:!0,drag:!0,preLoad:!0,preLoadDelay:0,automatic:!1,automaticDelay:3e3,automaticDirection:"next",automaticPauseOnHover:!1,initiate:function(){},complete:function(){}},e.prototype._init=function(){var i=this;this._setStartSlide(),this.options.pagination&&this._addPagination(),"slide"===this.options.animation?this._setupSlide():this._setupFade(),this.options.controls&&this._addControls(),this.options.keyControls&&this._addKeyControls(),this.options.drag&&this._addDragControls(),this.options.automatic&&this.options.automaticPauseOnHover&&this._pauseOnHover(),this.options.automatic&&this.start(),this.options.responsive&&$(t).resize(function(){i._updateDimensions()})},e.prototype._preLoad=function(){var i=this;this.options.preLoad?(this.viewport.addClass("loading transition-active"),this.slides.each(function(){i._preLoadSlide($(this))})):$(t).load(function(){i._preLoadComplete(),i.viewport.addClass("transition-active")})},e.prototype._preLoadSlide=function(t,i){var s=this,e=t.find("img").length,o=0;t.find("img").each(function(){var t=new Image;t.onload=function(){o++,o===e&&(s.preLoadCounter++,s.preLoadCounter===s.slides.length&&s._preLoadComplete())},t.src=$(this).attr("src")})},e.prototype._preLoadComplete=function(){0!==this.options.preLoadDelay?setTimeout(function(){this.wrap.height(this.slides.eq(this.activeSlide).outerHeight()),this.viewport.css({height:this.slides.eq(this.activeSlide).outerHeight()}).removeClass("loading")}.bind(this),this.options.preLoadDelay):(this.wrap.height(this.slides.eq(this.activeSlide).outerHeight()),this.viewport.css({height:this.slides.eq(this.activeSlide).outerHeight()}).removeClass("loading"))},e.prototype._setStartSlide=function(){var t=this.options.startSlide;this.activeSlide=this._isInfiniteSlider()?!t||0>t||t>this.slides.length?1:t+1:!t||0>t||t>this.slides.length?0:t},e.prototype._setupSlide=function(){var t=this;this.wrap.addClass("slide transition-active").wrap('<div class="viewport"></div>'),this.viewport=this.$el.find("div.viewport").css({width:this.width}),this.options.infinite&&this._setupInfiniteSlider(),this.slides.css({width:this.width}).eq(this.activeSlide).addClass("active"),this.wrap.css({width:this.slides.length*this.width,left:-(this.width*this.activeSlide)+"px"}),this._preLoad()},e.prototype._setupInfiniteSlider=function(){this.slides.eq(0).clone().attr("data-clone","last").appendTo(this.wrap),this.slides.eq(this.slides.length-1).clone().attr("data-clone","first").prependTo(this.wrap),this.slides=this.wrap.find("> li")},e.prototype._setupFade=function(){var t=this;this.wrap.addClass("fade transition-active").wrap('<div class="viewport"></div>'),this.viewport=this.$el.find("div.viewport"),this.slides.css({position:"absolute",width:this.width}),this.supportTransition&&this.options.useCss?(this.slides.eq(this.activeSlide).addClass("no-transition"),this.slides.eq(this.activeSlide).addClass("active"),this.slides.eq(this.activeSlide).offsetHeight,this.slides.eq(this.activeSlide).removeClass("no-transition")):this.slides.hide().eq(this.activeSlide).show().addClass("active"),this._preLoad()},e.prototype._addControls=function(){var t=this,i='<a class="direction-next" data-direction="forward"></a>',s='<a class="direction-previous" data-direction="previous"></a>';this.viewport.append(i).append(s),this.$el.on("click","[data-direction]",function(){t.options.automatic&&!t.options.automaticPauseOnHover&&t.start(),"forward"===$(this).attr("data-direction")?t.next(t.options.complete):t.previous(t.options.complete)})},e.prototype._addDragControls=function(){var t=this,i=!1;this.wrap.on("mousedown.carousel",function(s){if(s.preventDefault(),!t.inProgress){t.options.automatic&&(i=!0,t.stop()),t.wrap.addClass("no-transition");var e=s.pageX,o=parseInt(t.wrap.css("left"));t.wrap.off("mousemove.carousel").on("mousemove.carousel",function(i){var s=i.clientX,n=e-s;t.wrap.css("left",o-n)}),t.wrap.on("mouseup.carousel mouseleave.carousel",function(s){var o=s.pageX,n=i?t.start:"";t.wrap.off("mousemove.carousel mouseup.carousel mouseleave.carousel").removeClass("no-transition"),e-o>0?t.next(n):t.previous(n)})}})},e.prototype._pauseOnHover=function(){var t=this;this.viewport.on("mouseenter",function(){t.stop()}).on("mouseleave",function(){t.start()})},e.prototype._addPagination=function(){var t=this;this.pagination=$('<div class="slider-pagination"><ul></ul></div>'),this.$el.append(this.pagination),this.slides.each(function(i,s){t.pagination.children("ul").append('<li><a href="#" data-slide="'+i+'"></a></li>')}),this.updatePagination(),this.pagination.on("click","a",function(i){i.preventDefault(),t.options.automatic&&!t.options.automaticPauseOnHover&&t.start(),t.to(parseInt($(this).attr("data-slide")),t.options.complete)})},e.prototype.updatePagination=function(t){t=t||this.activeSlide;var i=this._isInfiniteSlider()?t-1:t;this.pagination.find("a").removeClass("active").eq(i).addClass("active")},e.prototype._addKeyControls=function(){var t=this;$(i).on("keydown",function(i){var s=i.keyCode;switch(i.keyCode){case 37:t.options.automatic&&!t.options.automaticPauseOnHover&&t.start(),t.previous(t.options.complete);break;case 39:t.options.automatic&&!t.options.automaticPauseOnHover&&t.start(),t.next(t.options.complete)}})},e.prototype.findNext=function(t){"forward"===t?this.activeSlide++:this.activeSlide--,this._isInfiniteSlider()||("forward"===t&&this.activeSlide===this.slides.length&&(this.activeSlide=0),"previous"===t&&this.activeSlide<0&&(this.activeSlide=this.slides.length-1))},e.prototype._change=function(t,i,s){this.inProgress||(this.inProgress=!0,null!==i?this.activeSlide=this._isInfiniteSlider()?i+1:i:this.findNext(t),"slide"===this.options.animation?this._slide(s):this._fade(s))},e.prototype._slide=function(t){var i=this;if(this.supportTransition&&this.options.useCss?(this.wrap.css("left",-(this.activeSlide*this.width)+"px"),this.wrap.one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){i._slideComplete(t)})):this.wrap.animate({left:-(this.activeSlide*this.width)+"px"},function(){i._slideComplete(t)}),this.options.pagination&&this.options.infinite&&this.slides.eq(this.activeSlide).is("[data-clone]"))var s="last"===this.slides.eq(this.activeSlide).attr("data-clone")?1:this.slides.length-2;this.options.pagination&&this.updatePagination(s),this.viewport.height(this.slides.eq(this.activeSlide).outerHeight())},e.prototype._slideComplete=function(t){this.options.infinite&&this.slides.eq(this.activeSlide).is("[data-clone]")&&this._infiniteReset(),this.slides.removeClass("active").eq(this.activeSlide).addClass("active"),$.isFunction(t)&&t.call(this),this.inProgress=!1},e.prototype._infiniteReset=function(){this.activeSlide="last"===this.slides.eq(this.activeSlide).attr("data-clone")?1:this.slides.length-2,this.supportTransition&&this.options.useCss?(this.wrap.addClass("no-transition"),this.wrap.css({left:-(this.width*this.activeSlide)+"px"}),this.wrap[0].offsetHeight,this.wrap.removeClass("no-transition")):this.wrap.css({left:-(this.width*this.activeSlide)+"px"})},e.prototype._fade=function(t){var i=this;this.supportTransition&&this.options.useCss?(this.slides.removeClass("active").eq(this.activeSlide).addClass("active"),this.slides.eq(this.activeSlide).one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){i._fadeComplete(t)})):this.slides.removeClass("active").fadeOut().eq(this.activeSlide).addClass("active").fadeIn(function(){i._fadeComplete(t)}),this.options.pagination&&this.updatePagination()},e.prototype._fadeComplete=function(t){$.isFunction(t)&&t.call(this),this.inProgress=!1},e.prototype._updateDimensions=function(){this.width=this.$el.outerWidth(),this.slides.css({width:this.width}),this.viewport.css({width:this.width}).height(this.slides.eq(this.activeSlide).outerHeight()),"slide"===this.options.animation?(this.wrap.addClass("no-transition"),this.wrap.css({width:this.slides.length*this.width,left:-(this.width*this.activeSlide)+"px"}),this.wrap[0].offsetHeight,this.wrap.removeClass("no-transition")):this.wrap.width(this.width).height(this.slides.eq(this.activeSlide).outerHeight())},e.prototype._isInfiniteSlider=function(){return"slide"===this.options.animation&&this.options.infinite},e.prototype.next=function(t){this._change("forward",null,t)},e.prototype.previous=function(t){this._change("previous",null,t)},e.prototype.to=function(t,i){var s=this._isInfiniteSlider()?this.slides.length-2:this.slides.length,e=this._isInfiniteSlider()?this.activeSlide-1:this.activeSlide;t>=0&&s>t&&e!==parseInt(t)&&this._change(null,t,i)},e.prototype.start=function(){var t=this;this.options.automatic=!0,null!==this.interval&&clearInterval(this.interval),this.interval=setInterval(function(){t[t.options.automaticDirection]()},this.options.automaticDelay)},e.prototype.stop=function(){this.options.automatic=!1,null!==this.interval&&clearInterval(this.interval)},$.fn.carousel=o}(window,document,jQuery);